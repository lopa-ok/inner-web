{"ast":null,"code":"import _defineProperty from\"/Users/mac/Documents/GitHub/inner-web/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"/Users/mac/Documents/GitHub/inner-web/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/Users/mac/Documents/GitHub/inner-web/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useCallback,useEffect,useState}from'react';import Colors from'../../constants/colors';import ShowcaseExplorer from'../applications/ShowcaseExplorer';import Doom from'../applications/Doom';import OregonTrail from'../applications/OregonTrail';import ShutdownSequence from'./ShutdownSequence';// import ThisComputer from '../applications/ThisComputer';\nimport esordle from'../applications/esordle';import Toolbar from'./Toolbar';import DesktopShortcut from'./DesktopShortcut';import Scrabble from'../applications/Scrabble';import Credits from'../applications/Credits';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var APPLICATIONS={// computer: {\n//     key: 'computer',\n//     name: 'This Computer',\n//     shortcutIcon: 'computerBig',\n//     component: ThisComputer,\n// },\nshowcase:{key:'showcase',name:'My Showcase',shortcutIcon:'showcaseIcon',component:ShowcaseExplorer},trail:{key:'trail',name:'The Oregon Trail',shortcutIcon:'trailIcon',component:OregonTrail},doom:{key:'doom',name:'Doom',shortcutIcon:'doomIcon',component:Doom},scrabble:{key:'scrabble',name:'Scrabble',shortcutIcon:'scrabbleIcon',component:Scrabble},esordle:{key:'esordle',name:'esordle',shortcutIcon:'henordleIcon',component:esordle},credits:{key:'credits',name:'Credits',shortcutIcon:'credits',component:Credits}};var Desktop=function Desktop(props){var _useState=useState({}),_useState2=_slicedToArray(_useState,2),windows=_useState2[0],setWindows=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),shortcuts=_useState4[0],setShortcuts=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),shutdown=_useState6[0],setShutdown=_useState6[1];var _useState7=useState(1),_useState8=_slicedToArray(_useState7,2),numShutdowns=_useState8[0],setNumShutdowns=_useState8[1];useEffect(function(){if(shutdown===true){rebootDesktop();}// eslint-disable-next-line react-hooks/exhaustive-deps\n},[shutdown]);useEffect(function(){var newShortcuts=[];Object.keys(APPLICATIONS).forEach(function(key){var app=APPLICATIONS[key];newShortcuts.push({shortcutName:app.name,icon:app.shortcutIcon,onOpen:function onOpen(){addWindow(app.key,/*#__PURE__*/_jsx(app.component,{onInteract:function onInteract(){return onWindowInteract(app.key);},onMinimize:function onMinimize(){return minimizeWindow(app.key);},onClose:function onClose(){return removeWindow(app.key);}},app.key));}});});newShortcuts.forEach(function(shortcut){if(shortcut.shortcutName==='My Showcase'){shortcut.onOpen();}});setShortcuts(newShortcuts);// eslint-disable-next-line react-hooks/exhaustive-deps\n},[]);var rebootDesktop=useCallback(function(){setWindows({});},[]);var removeWindow=useCallback(function(key){// Absolute hack and a half\nsetTimeout(function(){setWindows(function(prevWindows){var newWindows=_objectSpread({},prevWindows);delete newWindows[key];return newWindows;});},100);},[]);var minimizeWindow=useCallback(function(key){setWindows(function(prevWindows){var newWindows=_objectSpread({},prevWindows);newWindows[key].minimized=true;return newWindows;});},[]);var getHighestZIndex=useCallback(function(){var highestZIndex=0;Object.keys(windows).forEach(function(key){var window=windows[key];if(window){if(window.zIndex>highestZIndex)highestZIndex=window.zIndex;}});return highestZIndex;},[windows]);var toggleMinimize=useCallback(function(key){var newWindows=_objectSpread({},windows);var highestIndex=getHighestZIndex();if(newWindows[key].minimized||newWindows[key].zIndex===highestIndex){newWindows[key].minimized=!newWindows[key].minimized;}newWindows[key].zIndex=getHighestZIndex()+1;setWindows(newWindows);},[windows,getHighestZIndex]);var onWindowInteract=useCallback(function(key){setWindows(function(prevWindows){return _objectSpread(_objectSpread({},prevWindows),{},_defineProperty({},key,_objectSpread(_objectSpread({},prevWindows[key]),{},{zIndex:1+getHighestZIndex()})));});},[setWindows,getHighestZIndex]);var startShutdown=useCallback(function(){setTimeout(function(){setShutdown(true);setNumShutdowns(numShutdowns+1);},600);},[numShutdowns]);var addWindow=useCallback(function(key,element){setWindows(function(prevState){return _objectSpread(_objectSpread({},prevState),{},_defineProperty({},key,{zIndex:getHighestZIndex()+1,minimized:false,component:element,name:APPLICATIONS[key].name,icon:APPLICATIONS[key].shortcutIcon}));});},[getHighestZIndex]);return!shutdown?/*#__PURE__*/_jsxs(\"div\",{style:styles.desktop,children:[Object.keys(windows).map(function(key){var element=windows[key].component;if(!element)return/*#__PURE__*/_jsx(\"div\",{},\"win-\".concat(key));return/*#__PURE__*/_jsx(\"div\",{style:Object.assign({},{zIndex:windows[key].zIndex},windows[key].minimized&&styles.minimized),children:/*#__PURE__*/React.cloneElement(element,{key:key,onInteract:function onInteract(){return onWindowInteract(key);},onClose:function onClose(){return removeWindow(key);}})},\"win-\".concat(key));}),/*#__PURE__*/_jsx(\"div\",{style:styles.shortcuts,children:shortcuts.map(function(shortcut,i){return/*#__PURE__*/_jsx(\"div\",{style:Object.assign({},styles.shortcutContainer,{top:i*104}),children:/*#__PURE__*/_jsx(DesktopShortcut,{icon:shortcut.icon,shortcutName:shortcut.shortcutName,onOpen:shortcut.onOpen})},shortcut.shortcutName);})}),/*#__PURE__*/_jsx(Toolbar,{windows:windows,toggleMinimize:toggleMinimize,shutdown:startShutdown})]}):/*#__PURE__*/_jsx(ShutdownSequence,{setShutdown:setShutdown,numShutdowns:numShutdowns});};var styles={desktop:{minHeight:'100%',flex:1,backgroundColor:Colors.turquoise},shutdown:{minHeight:'100%',flex:1,backgroundColor:'#1d2e2f'},shortcutContainer:{position:'absolute'},shortcuts:{position:'absolute',top:16,left:6},minimized:{pointerEvents:'none',opacity:0}};export default Desktop;","map":{"version":3,"sources":["/Users/mac/Documents/GitHub/inner-web/src/components/os/Desktop.tsx"],"names":["React","useCallback","useEffect","useState","Colors","ShowcaseExplorer","Doom","OregonTrail","ShutdownSequence","esordle","Toolbar","DesktopShortcut","Scrabble","Credits","APPLICATIONS","showcase","key","name","shortcutIcon","component","trail","doom","scrabble","credits","Desktop","props","windows","setWindows","shortcuts","setShortcuts","shutdown","setShutdown","numShutdowns","setNumShutdowns","rebootDesktop","newShortcuts","Object","keys","forEach","app","push","shortcutName","icon","onOpen","addWindow","onWindowInteract","minimizeWindow","removeWindow","shortcut","setTimeout","prevWindows","newWindows","minimized","getHighestZIndex","highestZIndex","window","zIndex","toggleMinimize","highestIndex","startShutdown","element","prevState","styles","desktop","map","assign","cloneElement","onInteract","onClose","i","shortcutContainer","top","minHeight","flex","backgroundColor","turquoise","position","left","pointerEvents","opacity"],"mappings":"kXAAA,MAAOA,CAAAA,KAAP,EAAgBC,WAAhB,CAA6BC,SAA7B,CAAwCC,QAAxC,KAAwD,OAAxD,CACA,MAAOC,CAAAA,MAAP,KAAmB,wBAAnB,CACA,MAAOC,CAAAA,gBAAP,KAA6B,kCAA7B,CACA,MAAOC,CAAAA,IAAP,KAAiB,sBAAjB,CACA,MAAOC,CAAAA,WAAP,KAAwB,6BAAxB,CACA,MAAOC,CAAAA,gBAAP,KAA6B,oBAA7B,CACA;AACA,MAAOC,CAAAA,OAAP,KAAoB,yBAApB,CACA,MAAOC,CAAAA,OAAP,KAAoB,WAApB,CACA,MAAOC,CAAAA,eAAP,KAAsD,mBAAtD,CACA,MAAOC,CAAAA,QAAP,KAAqB,0BAArB,CAEA,MAAOC,CAAAA,OAAP,KAAoB,yBAApB,C,wFAMA,GAAMC,CAAAA,YAOL,CAAG,CACA;AACA;AACA;AACA;AACA;AACA;AACAC,QAAQ,CAAE,CACNC,GAAG,CAAE,UADC,CAENC,IAAI,CAAE,aAFA,CAGNC,YAAY,CAAE,cAHR,CAINC,SAAS,CAAEd,gBAJL,CAPV,CAaAe,KAAK,CAAE,CACHJ,GAAG,CAAE,OADF,CAEHC,IAAI,CAAE,kBAFH,CAGHC,YAAY,CAAE,WAHX,CAIHC,SAAS,CAAEZ,WAJR,CAbP,CAmBAc,IAAI,CAAE,CACFL,GAAG,CAAE,MADH,CAEFC,IAAI,CAAE,MAFJ,CAGFC,YAAY,CAAE,UAHZ,CAIFC,SAAS,CAAEb,IAJT,CAnBN,CAyBAgB,QAAQ,CAAE,CACNN,GAAG,CAAE,UADC,CAENC,IAAI,CAAE,UAFA,CAGNC,YAAY,CAAE,cAHR,CAINC,SAAS,CAAEP,QAJL,CAzBV,CA+BAH,OAAO,CAAE,CACLO,GAAG,CAAE,SADA,CAELC,IAAI,CAAE,SAFD,CAGLC,YAAY,CAAE,cAHT,CAILC,SAAS,CAAEV,OAJN,CA/BT,CAqCAc,OAAO,CAAE,CACLP,GAAG,CAAE,SADA,CAELC,IAAI,CAAE,SAFD,CAGLC,YAAY,CAAE,SAHT,CAILC,SAAS,CAAEN,OAJN,CArCT,CAPJ,CAoDA,GAAMW,CAAAA,OAA+B,CAAG,QAAlCA,CAAAA,OAAkC,CAACC,KAAD,CAAW,CAC/C,cAA8BtB,QAAQ,CAAiB,EAAjB,CAAtC,wCAAOuB,OAAP,eAAgBC,UAAhB,eAEA,eAAkCxB,QAAQ,CAAyB,EAAzB,CAA1C,yCAAOyB,SAAP,eAAkBC,YAAlB,eAEA,eAAgC1B,QAAQ,CAAC,KAAD,CAAxC,yCAAO2B,QAAP,eAAiBC,WAAjB,eACA,eAAwC5B,QAAQ,CAAC,CAAD,CAAhD,yCAAO6B,YAAP,eAAqBC,eAArB,eAEA/B,SAAS,CAAC,UAAM,CACZ,GAAI4B,QAAQ,GAAK,IAAjB,CAAuB,CACnBI,aAAa,GAChB,CACD;AACH,CALQ,CAKN,CAACJ,QAAD,CALM,CAAT,CAOA5B,SAAS,CAAC,UAAM,CACZ,GAAMiC,CAAAA,YAAoC,CAAG,EAA7C,CACAC,MAAM,CAACC,IAAP,CAAYvB,YAAZ,EAA0BwB,OAA1B,CAAkC,SAACtB,GAAD,CAAS,CACvC,GAAMuB,CAAAA,GAAG,CAAGzB,YAAY,CAACE,GAAD,CAAxB,CACAmB,YAAY,CAACK,IAAb,CAAkB,CACdC,YAAY,CAAEF,GAAG,CAACtB,IADJ,CAEdyB,IAAI,CAAEH,GAAG,CAACrB,YAFI,CAGdyB,MAAM,CAAE,iBAAM,CACVC,SAAS,CACLL,GAAG,CAACvB,GADC,cAEL,KAAC,GAAD,CAAK,SAAL,EACI,UAAU,CAAE,4BAAM6B,CAAAA,gBAAgB,CAACN,GAAG,CAACvB,GAAL,CAAtB,EADhB,CAEI,UAAU,CAAE,4BAAM8B,CAAAA,cAAc,CAACP,GAAG,CAACvB,GAAL,CAApB,EAFhB,CAGI,OAAO,CAAE,yBAAM+B,CAAAA,YAAY,CAACR,GAAG,CAACvB,GAAL,CAAlB,EAHb,EAISuB,GAAG,CAACvB,GAJb,CAFK,CAAT,CASH,CAba,CAAlB,EAeH,CAjBD,EAmBAmB,YAAY,CAACG,OAAb,CAAqB,SAACU,QAAD,CAAc,CAC/B,GAAIA,QAAQ,CAACP,YAAT,GAA0B,aAA9B,CAA6C,CACzCO,QAAQ,CAACL,MAAT,GACH,CACJ,CAJD,EAMAd,YAAY,CAACM,YAAD,CAAZ,CACA;AACH,CA7BQ,CA6BN,EA7BM,CAAT,CA+BA,GAAMD,CAAAA,aAAa,CAAGjC,WAAW,CAAC,UAAM,CACpC0B,UAAU,CAAC,EAAD,CAAV,CACH,CAFgC,CAE9B,EAF8B,CAAjC,CAIA,GAAMoB,CAAAA,YAAY,CAAG9C,WAAW,CAAC,SAACe,GAAD,CAAiB,CAC9C;AACAiC,UAAU,CAAC,UAAM,CACbtB,UAAU,CAAC,SAACuB,WAAD,CAAiB,CACxB,GAAMC,CAAAA,UAAU,kBAAQD,WAAR,CAAhB,CACA,MAAOC,CAAAA,UAAU,CAACnC,GAAD,CAAjB,CACA,MAAOmC,CAAAA,UAAP,CACH,CAJS,CAAV,CAKH,CANS,CAMP,GANO,CAAV,CAOH,CAT+B,CAS7B,EAT6B,CAAhC,CAWA,GAAML,CAAAA,cAAc,CAAG7C,WAAW,CAAC,SAACe,GAAD,CAAiB,CAChDW,UAAU,CAAC,SAACuB,WAAD,CAAiB,CACxB,GAAMC,CAAAA,UAAU,kBAAQD,WAAR,CAAhB,CACAC,UAAU,CAACnC,GAAD,CAAV,CAAgBoC,SAAhB,CAA4B,IAA5B,CACA,MAAOD,CAAAA,UAAP,CACH,CAJS,CAAV,CAKH,CANiC,CAM/B,EAN+B,CAAlC,CAQA,GAAME,CAAAA,gBAAgB,CAAGpD,WAAW,CAAC,UAAc,CAC/C,GAAIqD,CAAAA,aAAa,CAAG,CAApB,CACAlB,MAAM,CAACC,IAAP,CAAYX,OAAZ,EAAqBY,OAArB,CAA6B,SAACtB,GAAD,CAAS,CAClC,GAAMuC,CAAAA,MAAM,CAAG7B,OAAO,CAACV,GAAD,CAAtB,CACA,GAAIuC,MAAJ,CAAY,CACR,GAAIA,MAAM,CAACC,MAAP,CAAgBF,aAApB,CACIA,aAAa,CAAGC,MAAM,CAACC,MAAvB,CACP,CACJ,CAND,EAOA,MAAOF,CAAAA,aAAP,CACH,CAVmC,CAUjC,CAAC5B,OAAD,CAViC,CAApC,CAYA,GAAM+B,CAAAA,cAAc,CAAGxD,WAAW,CAC9B,SAACe,GAAD,CAAiB,CACb,GAAMmC,CAAAA,UAAU,kBAAQzB,OAAR,CAAhB,CACA,GAAMgC,CAAAA,YAAY,CAAGL,gBAAgB,EAArC,CACA,GACIF,UAAU,CAACnC,GAAD,CAAV,CAAgBoC,SAAhB,EACAD,UAAU,CAACnC,GAAD,CAAV,CAAgBwC,MAAhB,GAA2BE,YAF/B,CAGE,CACEP,UAAU,CAACnC,GAAD,CAAV,CAAgBoC,SAAhB,CAA4B,CAACD,UAAU,CAACnC,GAAD,CAAV,CAAgBoC,SAA7C,CACH,CACDD,UAAU,CAACnC,GAAD,CAAV,CAAgBwC,MAAhB,CAAyBH,gBAAgB,GAAK,CAA9C,CACA1B,UAAU,CAACwB,UAAD,CAAV,CACH,CAZ6B,CAa9B,CAACzB,OAAD,CAAU2B,gBAAV,CAb8B,CAAlC,CAgBA,GAAMR,CAAAA,gBAAgB,CAAG5C,WAAW,CAChC,SAACe,GAAD,CAAiB,CACbW,UAAU,CAAC,SAACuB,WAAD,wCACJA,WADI,wBAENlC,GAFM,gCAGAkC,WAAW,CAAClC,GAAD,CAHX,MAIHwC,MAAM,CAAE,EAAIH,gBAAgB,EAJzB,MAAD,CAAV,CAOH,CAT+B,CAUhC,CAAC1B,UAAD,CAAa0B,gBAAb,CAVgC,CAApC,CAaA,GAAMM,CAAAA,aAAa,CAAG1D,WAAW,CAAC,UAAM,CACpCgD,UAAU,CAAC,UAAM,CACblB,WAAW,CAAC,IAAD,CAAX,CACAE,eAAe,CAACD,YAAY,CAAG,CAAhB,CAAf,CACH,CAHS,CAGP,GAHO,CAAV,CAIH,CALgC,CAK9B,CAACA,YAAD,CAL8B,CAAjC,CAOA,GAAMY,CAAAA,SAAS,CAAG3C,WAAW,CACzB,SAACe,GAAD,CAAc4C,OAAd,CAAuC,CACnCjC,UAAU,CAAC,SAACkC,SAAD,wCACJA,SADI,wBAEN7C,GAFM,CAEA,CACHwC,MAAM,CAAEH,gBAAgB,GAAK,CAD1B,CAEHD,SAAS,CAAE,KAFR,CAGHjC,SAAS,CAAEyC,OAHR,CAIH3C,IAAI,CAAEH,YAAY,CAACE,GAAD,CAAZ,CAAkBC,IAJrB,CAKHyB,IAAI,CAAE5B,YAAY,CAACE,GAAD,CAAZ,CAAkBE,YALrB,CAFA,IAAD,CAAV,CAUH,CAZwB,CAazB,CAACmC,gBAAD,CAbyB,CAA7B,CAgBA,MAAO,CAACvB,QAAD,cACH,aAAK,KAAK,CAAEgC,MAAM,CAACC,OAAnB,WAEK3B,MAAM,CAACC,IAAP,CAAYX,OAAZ,EAAqBsC,GAArB,CAAyB,SAAChD,GAAD,CAAS,CAC/B,GAAM4C,CAAAA,OAAO,CAAGlC,OAAO,CAACV,GAAD,CAAP,CAAaG,SAA7B,CACA,GAAI,CAACyC,OAAL,CAAc,mBAAO,4BAAiB5C,GAAjB,EAAP,CACd,mBACI,YAEI,KAAK,CAAEoB,MAAM,CAAC6B,MAAP,CACH,EADG,CAEH,CAAET,MAAM,CAAE9B,OAAO,CAACV,GAAD,CAAP,CAAawC,MAAvB,CAFG,CAGH9B,OAAO,CAACV,GAAD,CAAP,CAAaoC,SAAb,EAA0BU,MAAM,CAACV,SAH9B,CAFX,uBAQKpD,KAAK,CAACkE,YAAN,CAAmBN,OAAnB,CAA4B,CACzB5C,GAAG,CAAHA,GADyB,CAEzBmD,UAAU,CAAE,4BAAMtB,CAAAA,gBAAgB,CAAC7B,GAAD,CAAtB,EAFa,CAGzBoD,OAAO,CAAE,yBAAMrB,CAAAA,YAAY,CAAC/B,GAAD,CAAlB,EAHgB,CAA5B,CARL,gBACgBA,GADhB,EADJ,CAgBH,CAnBA,CAFL,cAsBI,YAAK,KAAK,CAAE8C,MAAM,CAAClC,SAAnB,UACKA,SAAS,CAACoC,GAAV,CAAc,SAAChB,QAAD,CAAWqB,CAAX,CAAiB,CAC5B,mBACI,YACI,KAAK,CAAEjC,MAAM,CAAC6B,MAAP,CAAc,EAAd,CAAkBH,MAAM,CAACQ,iBAAzB,CAA4C,CAC/CC,GAAG,CAAEF,CAAC,CAAG,GADsC,CAA5C,CADX,uBAMI,KAAC,eAAD,EACI,IAAI,CAAErB,QAAQ,CAACN,IADnB,CAEI,YAAY,CAAEM,QAAQ,CAACP,YAF3B,CAGI,MAAM,CAAEO,QAAQ,CAACL,MAHrB,EANJ,EAISK,QAAQ,CAACP,YAJlB,CADJ,CAcH,CAfA,CADL,EAtBJ,cAwCI,KAAC,OAAD,EACI,OAAO,CAAEf,OADb,CAEI,cAAc,CAAE+B,cAFpB,CAGI,QAAQ,CAAEE,aAHd,EAxCJ,GADG,cAgDH,KAAC,gBAAD,EACI,WAAW,CAAE5B,WADjB,CAEI,YAAY,CAAEC,YAFlB,EAhDJ,CAqDH,CA1LD,CA4LA,GAAM8B,CAAAA,MAAqB,CAAG,CAC1BC,OAAO,CAAE,CACLS,SAAS,CAAE,MADN,CAELC,IAAI,CAAE,CAFD,CAGLC,eAAe,CAAEtE,MAAM,CAACuE,SAHnB,CADiB,CAM1B7C,QAAQ,CAAE,CACN0C,SAAS,CAAE,MADL,CAENC,IAAI,CAAE,CAFA,CAGNC,eAAe,CAAE,SAHX,CANgB,CAW1BJ,iBAAiB,CAAE,CACfM,QAAQ,CAAE,UADK,CAXO,CAc1BhD,SAAS,CAAE,CACPgD,QAAQ,CAAE,UADH,CAEPL,GAAG,CAAE,EAFE,CAGPM,IAAI,CAAE,CAHC,CAde,CAmB1BzB,SAAS,CAAE,CACP0B,aAAa,CAAE,MADR,CAEPC,OAAO,CAAE,CAFF,CAnBe,CAA9B,CAyBA,cAAevD,CAAAA,OAAf","sourcesContent":["import React, { useCallback, useEffect, useState } from 'react';\nimport Colors from '../../constants/colors';\nimport ShowcaseExplorer from '../applications/ShowcaseExplorer';\nimport Doom from '../applications/Doom';\nimport OregonTrail from '../applications/OregonTrail';\nimport ShutdownSequence from './ShutdownSequence';\n// import ThisComputer from '../applications/ThisComputer';\nimport esordle from '../applications/esordle';\nimport Toolbar from './Toolbar';\nimport DesktopShortcut, { DesktopShortcutProps } from './DesktopShortcut';\nimport Scrabble from '../applications/Scrabble';\nimport { IconName } from '../../assets/icons';\nimport Credits from '../applications/Credits';\n\nexport interface DesktopProps {}\n\ntype ExtendedWindowAppProps<T> = T & WindowAppProps;\n\nconst APPLICATIONS: {\n    [key in string]: {\n        key: string;\n        name: string;\n        shortcutIcon: IconName;\n        component: React.FC<ExtendedWindowAppProps<any>>;\n    };\n} = {\n    // computer: {\n    //     key: 'computer',\n    //     name: 'This Computer',\n    //     shortcutIcon: 'computerBig',\n    //     component: ThisComputer,\n    // },\n    showcase: {\n        key: 'showcase',\n        name: 'My Showcase',\n        shortcutIcon: 'showcaseIcon',\n        component: ShowcaseExplorer,\n    },\n    trail: {\n        key: 'trail',\n        name: 'The Oregon Trail',\n        shortcutIcon: 'trailIcon',\n        component: OregonTrail,\n    },\n    doom: {\n        key: 'doom',\n        name: 'Doom',\n        shortcutIcon: 'doomIcon',\n        component: Doom,\n    },\n    scrabble: {\n        key: 'scrabble',\n        name: 'Scrabble',\n        shortcutIcon: 'scrabbleIcon',\n        component: Scrabble,\n    },\n    esordle: {\n        key: 'esordle',\n        name: 'esordle',\n        shortcutIcon: 'henordleIcon',\n        component: esordle,\n    },\n    credits: {\n        key: 'credits',\n        name: 'Credits',\n        shortcutIcon: 'credits',\n        component: Credits,\n    },\n};\n\nconst Desktop: React.FC<DesktopProps> = (props) => {\n    const [windows, setWindows] = useState<DesktopWindows>({});\n\n    const [shortcuts, setShortcuts] = useState<DesktopShortcutProps[]>([]);\n\n    const [shutdown, setShutdown] = useState(false);\n    const [numShutdowns, setNumShutdowns] = useState(1);\n\n    useEffect(() => {\n        if (shutdown === true) {\n            rebootDesktop();\n        }\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [shutdown]);\n\n    useEffect(() => {\n        const newShortcuts: DesktopShortcutProps[] = [];\n        Object.keys(APPLICATIONS).forEach((key) => {\n            const app = APPLICATIONS[key];\n            newShortcuts.push({\n                shortcutName: app.name,\n                icon: app.shortcutIcon,\n                onOpen: () => {\n                    addWindow(\n                        app.key,\n                        <app.component\n                            onInteract={() => onWindowInteract(app.key)}\n                            onMinimize={() => minimizeWindow(app.key)}\n                            onClose={() => removeWindow(app.key)}\n                            key={app.key}\n                        />\n                    );\n                },\n            });\n        });\n\n        newShortcuts.forEach((shortcut) => {\n            if (shortcut.shortcutName === 'My Showcase') {\n                shortcut.onOpen();\n            }\n        });\n\n        setShortcuts(newShortcuts);\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, []);\n\n    const rebootDesktop = useCallback(() => {\n        setWindows({});\n    }, []);\n\n    const removeWindow = useCallback((key: string) => {\n        // Absolute hack and a half\n        setTimeout(() => {\n            setWindows((prevWindows) => {\n                const newWindows = { ...prevWindows };\n                delete newWindows[key];\n                return newWindows;\n            });\n        }, 100);\n    }, []);\n\n    const minimizeWindow = useCallback((key: string) => {\n        setWindows((prevWindows) => {\n            const newWindows = { ...prevWindows };\n            newWindows[key].minimized = true;\n            return newWindows;\n        });\n    }, []);\n\n    const getHighestZIndex = useCallback((): number => {\n        let highestZIndex = 0;\n        Object.keys(windows).forEach((key) => {\n            const window = windows[key];\n            if (window) {\n                if (window.zIndex > highestZIndex)\n                    highestZIndex = window.zIndex;\n            }\n        });\n        return highestZIndex;\n    }, [windows]);\n\n    const toggleMinimize = useCallback(\n        (key: string) => {\n            const newWindows = { ...windows };\n            const highestIndex = getHighestZIndex();\n            if (\n                newWindows[key].minimized ||\n                newWindows[key].zIndex === highestIndex\n            ) {\n                newWindows[key].minimized = !newWindows[key].minimized;\n            }\n            newWindows[key].zIndex = getHighestZIndex() + 1;\n            setWindows(newWindows);\n        },\n        [windows, getHighestZIndex]\n    );\n\n    const onWindowInteract = useCallback(\n        (key: string) => {\n            setWindows((prevWindows) => ({\n                ...prevWindows,\n                [key]: {\n                    ...prevWindows[key],\n                    zIndex: 1 + getHighestZIndex(),\n                },\n            }));\n        },\n        [setWindows, getHighestZIndex]\n    );\n\n    const startShutdown = useCallback(() => {\n        setTimeout(() => {\n            setShutdown(true);\n            setNumShutdowns(numShutdowns + 1);\n        }, 600);\n    }, [numShutdowns]);\n\n    const addWindow = useCallback(\n        (key: string, element: JSX.Element) => {\n            setWindows((prevState) => ({\n                ...prevState,\n                [key]: {\n                    zIndex: getHighestZIndex() + 1,\n                    minimized: false,\n                    component: element,\n                    name: APPLICATIONS[key].name,\n                    icon: APPLICATIONS[key].shortcutIcon,\n                },\n            }));\n        },\n        [getHighestZIndex]\n    );\n\n    return !shutdown ? (\n        <div style={styles.desktop}>\n            {/* For each window in windows, loop over and render  */}\n            {Object.keys(windows).map((key) => {\n                const element = windows[key].component;\n                if (!element) return <div key={`win-${key}`}></div>;\n                return (\n                    <div\n                        key={`win-${key}`}\n                        style={Object.assign(\n                            {},\n                            { zIndex: windows[key].zIndex },\n                            windows[key].minimized && styles.minimized\n                        )}\n                    >\n                        {React.cloneElement(element, {\n                            key,\n                            onInteract: () => onWindowInteract(key),\n                            onClose: () => removeWindow(key),\n                        })}\n                    </div>\n                );\n            })}\n            <div style={styles.shortcuts}>\n                {shortcuts.map((shortcut, i) => {\n                    return (\n                        <div\n                            style={Object.assign({}, styles.shortcutContainer, {\n                                top: i * 104,\n                            })}\n                            key={shortcut.shortcutName}\n                        >\n                            <DesktopShortcut\n                                icon={shortcut.icon}\n                                shortcutName={shortcut.shortcutName}\n                                onOpen={shortcut.onOpen}\n                            />\n                        </div>\n                    );\n                })}\n            </div>\n            <Toolbar\n                windows={windows}\n                toggleMinimize={toggleMinimize}\n                shutdown={startShutdown}\n            />\n        </div>\n    ) : (\n        <ShutdownSequence\n            setShutdown={setShutdown}\n            numShutdowns={numShutdowns}\n        />\n    );\n};\n\nconst styles: StyleSheetCSS = {\n    desktop: {\n        minHeight: '100%',\n        flex: 1,\n        backgroundColor: Colors.turquoise,\n    },\n    shutdown: {\n        minHeight: '100%',\n        flex: 1,\n        backgroundColor: '#1d2e2f',\n    },\n    shortcutContainer: {\n        position: 'absolute',\n    },\n    shortcuts: {\n        position: 'absolute',\n        top: 16,\n        left: 6,\n    },\n    minimized: {\n        pointerEvents: 'none',\n        opacity: 0,\n    },\n};\n\nexport default Desktop;\n"]},"metadata":{},"sourceType":"module"}