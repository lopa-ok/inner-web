{"ast":null,"code":"var _jsxFileName = \"/Users/mac/Documents/GitHub/inner-web/src/components/applications/Game2048.tsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport Window from '../os/Window';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst SIZE = 4;\n\nconst getInitialGrid = () => {\n  const grid = Array(SIZE).fill(null).map(() => Array(SIZE).fill(0));\n  addRandomTile(grid);\n  addRandomTile(grid);\n  return grid;\n};\n\nconst addRandomTile = grid => {\n  const emptyTiles = [];\n\n  for (let i = 0; i < SIZE; i++) {\n    for (let j = 0; j < SIZE; j++) {\n      if (grid[i][j] === 0) {\n        emptyTiles.push({\n          x: i,\n          y: j\n        });\n      }\n    }\n  }\n\n  if (emptyTiles.length > 0) {\n    const {\n      x,\n      y\n    } = emptyTiles[Math.floor(Math.random() * emptyTiles.length)];\n    grid[x][y] = Math.random() < 0.9 ? 2 : 4;\n  }\n};\n\nconst moveLeft = grid => {\n  let moved = false;\n\n  for (let i = 0; i < SIZE; i++) {\n    let row = grid[i].filter(val => val);\n    let newRow = [];\n\n    for (let j = 0; j < row.length; j++) {\n      if (row[j] === row[j + 1]) {\n        newRow.push(row[j] * 2);\n        j++;\n        moved = true;\n      } else {\n        newRow.push(row[j]);\n      }\n    }\n\n    while (newRow.length < SIZE) {\n      newRow.push(0);\n    }\n\n    if (newRow.join('') !== grid[i].join('')) {\n      moved = true;\n    }\n\n    grid[i] = newRow;\n  }\n\n  return moved;\n};\n\nconst rotateGrid = grid => {\n  const newGrid = Array(SIZE).fill(null).map(() => Array(SIZE).fill(0));\n\n  for (let i = 0; i < SIZE; i++) {\n    for (let j = 0; j < SIZE; j++) {\n      newGrid[j][SIZE - 1 - i] = grid[i][j];\n    }\n  }\n\n  return newGrid;\n};\n\nconst Game2048 = _ref => {\n  _s();\n\n  let {\n    onInteract,\n    onMinimize,\n    onClose\n  } = _ref;\n  const [grid, setGrid] = useState(getInitialGrid);\n  const [gameOver, setGameOver] = useState(false);\n\n  const handleKeyDown = event => {\n    if (gameOver) return;\n    let moved = false;\n    let newGrid = [...grid];\n\n    switch (event.key) {\n      case 'ArrowLeft':\n        moved = moveLeft(newGrid);\n        break;\n\n      case 'ArrowRight':\n        newGrid = rotateGrid(rotateGrid(newGrid));\n        moved = moveLeft(newGrid);\n        newGrid = rotateGrid(rotateGrid(newGrid));\n        break;\n\n      case 'ArrowUp':\n        newGrid = rotateGrid(rotateGrid(rotateGrid(newGrid)));\n        moved = moveLeft(newGrid);\n        newGrid = rotateGrid(newGrid);\n        break;\n\n      case 'ArrowDown':\n        newGrid = rotateGrid(newGrid);\n        moved = moveLeft(newGrid);\n        newGrid = rotateGrid(rotateGrid(rotateGrid(newGrid)));\n        break;\n\n      default:\n        break;\n    }\n\n    if (moved) {\n      addRandomTile(newGrid);\n      setGrid(newGrid);\n\n      if (!canMove(newGrid)) {\n        setGameOver(true);\n      }\n    }\n  };\n\n  const canMove = grid => {\n    for (let i = 0; i < SIZE; i++) {\n      for (let j = 0; j < SIZE; j++) {\n        if (grid[i][j] === 0) return true;\n        if (i < SIZE - 1 && grid[i][j] === grid[i + 1][j]) return true;\n        if (j < SIZE - 1 && grid[i][j] === grid[i][j + 1]) return true;\n      }\n    }\n\n    return false;\n  };\n\n  useEffect(() => {\n    window.addEventListener('keydown', handleKeyDown);\n    return () => {\n      window.removeEventListener('keydown', handleKeyDown);\n    };\n  }, [grid, gameOver]);\n\n  const restartGame = () => {\n    setGrid(getInitialGrid());\n    setGameOver(false);\n  };\n\n  return /*#__PURE__*/_jsxDEV(Window, {\n    onInteract: onInteract,\n    minimizeWindow: onMinimize,\n    closeWindow: onClose,\n    windowTitle: \"2048\",\n    width: 400,\n    height: 400,\n    top: 50,\n    left: 50,\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      style: styles.container,\n      children: [gameOver && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: styles.gameOverOverlay,\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Game Over\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 148,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: restartGame,\n          children: \"Restart\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 149,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: styles.grid,\n        children: grid.map((row, rowIndex) => /*#__PURE__*/_jsxDEV(\"div\", {\n          style: styles.row,\n          children: row.map((cell, cellIndex) => /*#__PURE__*/_jsxDEV(\"div\", {\n            style: styles.cell,\n            children: cell !== 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n              style: styles.tile,\n              children: cell\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 157,\n              columnNumber: 52\n            }, this)\n          }, cellIndex, false, {\n            fileName: _jsxFileName,\n            lineNumber: 156,\n            columnNumber: 33\n          }, this))\n        }, rowIndex, false, {\n          fileName: _jsxFileName,\n          lineNumber: 154,\n          columnNumber: 25\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 135,\n    columnNumber: 9\n  }, this);\n};\n\n_s(Game2048, \"QdZ0Sr4v3OcjD5/nNps6p0j+qBk=\");\n\n_c = Game2048;\nconst styles = {\n  container: {\n    position: 'relative',\n    width: '100%',\n    height: '100%',\n    display: 'flex',\n    justifyContent: 'center',\n    alignItems: 'center',\n    backgroundColor: '#faf8ef'\n  },\n  grid: {\n    display: 'flex',\n    flexDirection: 'column',\n    gap: 10,\n    backgroundColor: '#bbada0',\n    padding: 10,\n    borderRadius: 5,\n    width: '100%',\n    maxWidth: 400,\n    height: '100%',\n    maxHeight: 400\n  },\n  row: {\n    display: 'flex',\n    width: '100%',\n    gap: 10\n  },\n  cell: {\n    width: '100%',\n    height: 80,\n    backgroundColor: '#cdc1b4',\n    borderRadius: 5,\n    display: 'flex',\n    justifyContent: 'center',\n    alignItems: 'center'\n  },\n  tile: {\n    width: '100%',\n    height: '100%',\n    backgroundColor: '#eee4da',\n    borderRadius: 5,\n    display: 'flex',\n    justifyContent: 'center',\n    alignItems: 'center',\n    fontSize: 24,\n    fontWeight: 'bold'\n  },\n  gameOverOverlay: {\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    width: '100%',\n    height: '100%',\n    backgroundColor: 'rgba(0, 0, 0, 0.5)',\n    display: 'flex',\n    flexDirection: 'column',\n    justifyContent: 'center',\n    alignItems: 'center',\n    color: '#fff',\n    zIndex: 10\n  }\n};\nexport default Game2048;\n\nvar _c;\n\n$RefreshReg$(_c, \"Game2048\");","map":{"version":3,"sources":["/Users/mac/Documents/GitHub/inner-web/src/components/applications/Game2048.tsx"],"names":["React","useState","useEffect","Window","SIZE","getInitialGrid","grid","Array","fill","map","addRandomTile","emptyTiles","i","j","push","x","y","length","Math","floor","random","moveLeft","moved","row","filter","val","newRow","join","rotateGrid","newGrid","Game2048","onInteract","onMinimize","onClose","setGrid","gameOver","setGameOver","handleKeyDown","event","key","canMove","window","addEventListener","removeEventListener","restartGame","styles","container","gameOverOverlay","rowIndex","cell","cellIndex","tile","position","width","height","display","justifyContent","alignItems","backgroundColor","flexDirection","gap","padding","borderRadius","maxWidth","maxHeight","fontSize","fontWeight","top","left","color","zIndex"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport Window from '../os/Window';\n\ninterface WindowProps {\n    onInteract: () => void;\n    onMinimize: () => void;\n    onClose: () => void;\n}\n\nconst SIZE = 4;\n\nconst getInitialGrid = () => {\n    const grid = Array(SIZE).fill(null).map(() => Array(SIZE).fill(0));\n    addRandomTile(grid);\n    addRandomTile(grid);\n    return grid;\n};\n\nconst addRandomTile = (grid: number[][]) => {\n    const emptyTiles = [];\n    for (let i = 0; i < SIZE; i++) {\n        for (let j = 0; j < SIZE; j++) {\n            if (grid[i][j] === 0) {\n                emptyTiles.push({ x: i, y: j });\n            }\n        }\n    }\n    if (emptyTiles.length > 0) {\n        const { x, y } = emptyTiles[Math.floor(Math.random() * emptyTiles.length)];\n        grid[x][y] = Math.random() < 0.9 ? 2 : 4;\n    }\n};\n\nconst moveLeft = (grid: number[][]) => {\n    let moved = false;\n    for (let i = 0; i < SIZE; i++) {\n        let row = grid[i].filter(val => val);\n        let newRow = [];\n        for (let j = 0; j < row.length; j++) {\n            if (row[j] === row[j + 1]) {\n                newRow.push(row[j] * 2);\n                j++;\n                moved = true;\n            } else {\n                newRow.push(row[j]);\n            }\n        }\n        while (newRow.length < SIZE) {\n            newRow.push(0);\n        }\n        if (newRow.join('') !== grid[i].join('')) {\n            moved = true;\n        }\n        grid[i] = newRow;\n    }\n    return moved;\n};\n\nconst rotateGrid = (grid: number[][]) => {\n    const newGrid = Array(SIZE).fill(null).map(() => Array(SIZE).fill(0));\n    for (let i = 0; i < SIZE; i++) {\n        for (let j = 0; j < SIZE; j++) {\n            newGrid[j][SIZE - 1 - i] = grid[i][j];\n        }\n    }\n    return newGrid;\n};\n\nconst Game2048: React.FC<WindowProps> = ({ onInteract, onMinimize, onClose }) => {\n    const [grid, setGrid] = useState(getInitialGrid);\n    const [gameOver, setGameOver] = useState(false);\n\n    const handleKeyDown = (event: KeyboardEvent) => {\n        if (gameOver) return;\n\n        let moved = false;\n        let newGrid = [...grid];\n\n        switch (event.key) {\n            case 'ArrowLeft':\n                moved = moveLeft(newGrid);\n                break;\n            case 'ArrowRight':\n                newGrid = rotateGrid(rotateGrid(newGrid));\n                moved = moveLeft(newGrid);\n                newGrid = rotateGrid(rotateGrid(newGrid));\n                break;\n            case 'ArrowUp':\n                newGrid = rotateGrid(rotateGrid(rotateGrid(newGrid)));\n                moved = moveLeft(newGrid);\n                newGrid = rotateGrid(newGrid);\n                break;\n            case 'ArrowDown':\n                newGrid = rotateGrid(newGrid);\n                moved = moveLeft(newGrid);\n                newGrid = rotateGrid(rotateGrid(rotateGrid(newGrid)));\n                break;\n            default:\n                break;\n        }\n\n        if (moved) {\n            addRandomTile(newGrid);\n            setGrid(newGrid);\n            if (!canMove(newGrid)) {\n                setGameOver(true);\n            }\n        }\n    };\n\n    const canMove = (grid: number[][]) => {\n        for (let i = 0; i < SIZE; i++) {\n            for (let j = 0; j < SIZE; j++) {\n                if (grid[i][j] === 0) return true;\n                if (i < SIZE - 1 && grid[i][j] === grid[i + 1][j]) return true;\n                if (j < SIZE - 1 && grid[i][j] === grid[i][j + 1]) return true;\n            }\n        }\n        return false;\n    };\n\n    useEffect(() => {\n        window.addEventListener('keydown', handleKeyDown);\n        return () => {\n            window.removeEventListener('keydown', handleKeyDown);\n        };\n    }, [grid, gameOver]);\n\n    const restartGame = () => {\n        setGrid(getInitialGrid());\n        setGameOver(false);\n    };\n\n    return (\n        <Window\n            onInteract={onInteract}\n            minimizeWindow={onMinimize}\n            closeWindow={onClose}\n            windowTitle=\"2048\"\n            width={400}\n            height={400}\n            top={50}\n            left={50}\n        >\n            <div style={styles.container}>\n                {gameOver && (\n                    <div style={styles.gameOverOverlay}>\n                        <h2>Game Over</h2>\n                        <button onClick={restartGame}>Restart</button>\n                    </div>\n                )}\n                <div style={styles.grid}>\n                    {grid.map((row, rowIndex) => (\n                        <div key={rowIndex} style={styles.row}>\n                            {row.map((cell, cellIndex) => (\n                                <div key={cellIndex} style={styles.cell}>\n                                    {cell !== 0 && <div style={styles.tile}>{cell}</div>}\n                                </div>\n                            ))}\n                        </div>\n                    ))}\n                </div>\n            </div>\n        </Window>\n    );\n};\n\nconst styles: StyleSheetCSS = {\n    container: {\n        position: 'relative',\n        width: '100%',\n        height: '100%',\n        display: 'flex',\n        justifyContent: 'center',\n        alignItems: 'center',\n        backgroundColor: '#faf8ef',\n    },\n    grid: {\n        display: 'flex',\n        flexDirection: 'column',\n        gap: 10,\n        backgroundColor: '#bbada0',\n        padding: 10,\n        borderRadius: 5,\n        width: '100%',\n        maxWidth: 400,\n        height: '100%',\n        maxHeight: 400,\n    },\n    row: {\n        display: 'flex',\n        width: '100%',\n        gap: 10,\n    },\n    cell: {\n        width: '100%',\n        height: 80,\n        backgroundColor: '#cdc1b4',\n        borderRadius: 5,\n        display: 'flex',\n        justifyContent: 'center',\n        alignItems: 'center',\n    },\n    tile: {\n        width: '100%',\n        height: '100%',\n        backgroundColor: '#eee4da',\n        borderRadius: 5,\n        display: 'flex',\n        justifyContent: 'center',\n        alignItems: 'center',\n        fontSize: 24,\n        fontWeight: 'bold',\n    },\n    gameOverOverlay: {\n        position: 'absolute',\n        top: 0,\n        left: 0,\n        width: '100%',\n        height: '100%',\n        backgroundColor: 'rgba(0, 0, 0, 0.5)',\n        display: 'flex',\n        flexDirection: 'column',\n        justifyContent: 'center',\n        alignItems: 'center',\n        color: '#fff',\n        zIndex: 10,\n    },\n};\n\nexport default Game2048;\n"]},"metadata":{},"sourceType":"module"}